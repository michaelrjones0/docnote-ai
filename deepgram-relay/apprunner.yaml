# AWS App Runner configuration for Deepgram Relay
# 
# Deploy: aws apprunner create-service --cli-input-json file://apprunner-config.json
# Or use the AWS Console

version: 1.0
runtime: nodejs18

build:
  commands:
    build:
      - npm ci --only=production

run:
  command: node index.js
  network:
    port: 8080
  env:
    - name: PORT
      value: "8080"
    - name: HEALTH_PORT
      value: "8081"
    # These should be set as secrets in App Runner:
    # - DEEPGRAM_API_KEY
    # - SUPABASE_URL
    # - SUPABASE_ANON_KEY
    # - ALLOWED_ORIGINS
